local pokestorages = {
[7274] = {"001","Bulbasaur"},
[7275] = {"002","Ivysaur"},
[7276] = {"003","Venusaur"},
[7277] = {"004","Charmander"},
[7278] = {"005","Charmeleon"},
[7279] = {"006","Charizard"},
[7280] = {"007","Squirtle"},
[7281] = {"008","Wartortle"},
[7282] = {"009","Blastoise"},
[7283] = {"010","Caterpie"},
[7284] = {"011","Metapod"},
[7285] = {"012","Butterfree"},
[7286] = {"013","Weedle"},
[7287] = {"014","Kakuna"},
[7288] = {"015","Beedrill"},
[7289] = {"016","Pidgey"},
[7290] = {"017","Pidgeotto"},
[7291] = {"018","Pidgeot"},
[7292] = {"019","Rattata"},
[7293] = {"020","Raticate"},
[7294] = {"021","Spearow"},
[7295] = {"022","Fearow"},
[7296] = {"023","Ekans"},
[7297] = {"024","Arbok"},
[7298] = {"025","Pikachu"},
[7299] = {"026","Raichu"},
[7300] = {"027","Sandshrew"},
[7301] = {"028","Sandslash"},
[7302] = {"029","Nidoran Male"},
[7303] = {"030","Nidorina"},
[7304] = {"031","Nidoquin"},
[7305] = {"032","Nidora Female"},
[7306] = {"033","Nidorino"},
[7307] = {"034","Nidoking"},
[7308] = {"035","Clefairy"},
[7309] = {"036","Clefable"},
[7310] = {"037","Vulpix"},
[7311] = {"038","Ninetales"},
[7312] = {"039","Jigglypuff"},
[7313] = {"040","Wigglytuff"},
[7314] = {"041","Zubat"},
[7315] = {"042","Golbat"},
[7316] = {"043","Oddish"},
[7317] = {"044","Gloom"},
[7318] = {"045","Vileplume"},
[7319] = {"046","Paras"},
[7320] = {"047","Parasect"},
[7321] = {"048","Venonat"},
[7322] = {"049","Venomoth"},
[7323] = {"050","Diglett"},
[7324] = {"051","Dugtrio"},
[7325] = {"052","Meowth"},
[7326] = {"053","Persian"},
[7327] = {"054","Psyduck"},
[7328] = {"055","Golduck"},
[7329] = {"056","Mankey"},
[7330] = {"057","Primeape"},
[7331] = {"058","Growlithe"},
[7332] = {"059","Arcanine"},
[7333] = {"060","Poliwag"},
[7334] = {"061","Poliwhirl"},
[7335] = {"062","Poliwrath"},
[7336] = {"063","Abra"},
[7337] = {"064","Kadabra"},
[7338] = {"065","Alakazam"},
[7339] = {"066","Machop"},
[7340] = {"067","Machoke"},
[7341] = {"068","Machamp"},
[7342] = {"069","Bellsprout"},
[7343] = {"070","Weepinbell"},
[7344] = {"071","Victreebel"},
[7345] = {"072","Tentacool"},
[7346] = {"073","Tentacruel"},
[7347] = {"074","Geodude"},
[7348] = {"075","Graveler"},
[7349] = {"076","Golem"},
[7350] = {"077","Ponyta"},
[7351] = {"078","Rapidash"},
[7352] = {"079","Slowpoke"},
[7353] = {"080","Slowbro"},
[7354] = {"081","Magnemite"},
[7355] = {"082","Magneton"},
[7356] = {"083","Farfetchd"},
[7357] = {"084","Doduo"},
[7358] = {"085","Dodrio"},
[7359] = {"086","Seel"},
[7360] = {"087","Dewgong"},
[7361] = {"088","Grimer"},
[7362] = {"089","Muk"},
[7363] = {"090","Shellder"},
[7364] = {"091","Cloyster"},
[7365] = {"092","Gastly"},
[7366] = {"093","Haunter"},
[7367] = {"094","Gengar"},
[7368] = {"095","Onix"},
[7369] = {"096","Drowzee"},
[7370] = {"097","Hypno"},
[7371] = {"098","Krabby"},
[7372] = {"099","Kingler"},
[7373] = {"100","Voltorb"},
[7374] = {"101","Electrode"},
[7375] = {"102","Exeggcute"},
[7376] = {"103","Exeggutor"},
[7377] = {"104","Cubone"},
[7378] = {"105","Marowak"},
[7379] = {"106","Hitmonlee"},
[7380] = {"107","Hitmonchan"},
[7381] = {"108","Lickitung"},
[7382] = {"109","Koffing"},
[7383] = {"110","Weezing"},
[7384] = {"111","Rhyhorn"},
[7385] = {"112","Rhydon"},
[7386] = {"113","Chansey"},
[7387] = {"114","Tangela"},
[7388] = {"115","Kangaskhan"},
[7389] = {"116","Horsea"},
[7390] = {"117","Seadra"},
[7391] = {"118","Goldeen"},
[7392] = {"119","Seaking"},
[7393] = {"120","Staryu"},
[7394] = {"121","Starmie"},
[7395] = {"122","Mr Mime"},
[7396] = {"123","Scyther"},
[7397] = {"124","Jynx"},
[7398] = {"125","Electabuzz"},
[7399] = {"126","Magmar"},
[7400] = {"127","Pinsir"},
[7401] = {"128","Tauros"},
[7402] = {"129","Magikarp"},
[7403] = {"130","Gyarados"},
[7404] = {"131","Lapras"},
[7405] = {"132","Ditto"},
[7406] = {"133","Eevee"},
[7407] = {"134","Vaporeon"},
[7408] = {"135","Jolteon"},
[7409] = {"136","Flareon"},
[7410] = {"137","Porygon"},
[7411] = {"138","Omanyte"},
[7412] = {"139","Omastar"},
[7413] = {"140","Kabuto"},
[7414] = {"141","Kabutops"},
[7415] = {"142","Aerodactyl"},
[7416] = {"143","Snorlax"},
[7417] = {"144","Articuno"},
[7418] = {"145","Zapdos"},
[7419] = {"146","Moltres"},
[7420] = {"147","Dratini"},
[7421] = {"148","Dragonair"},
[7422] = {"149","Dragonite"},
[7423] = {"150","Mewtwo"},
[7424] = {"151","Mew"}
}

local pokemons = { -- { number of storage, itemid on click pokedex, number}
["Bulbasaur"]    = {7274, 2377, 1, 100},
["Ivysaur"]      = {7275, 2378, 2, 200},
["Venusaur"]     = {7276, 2379, 3, 300},
["Charmander"]   = {7277, 2380, 4, 100},
["Charmeleon"]   = {7278, 2381, 5, 200},
["Charizard"] 	 = {7279, 2382, 6, 300},
["Squirtle"]     = {7280, 2383, 7, 100},
["Wartortle"]    = {7281, 2384, 8, 200},
["Blastoise"]    = {7282, 2385, 9, 300},
["Caterpie"]     = {7283, 2386, 10, 50},
["Metapod"]      = {7284, 2387, 11, 100},
["Butterfree"]   = {7285, 2388, 12, 100},
["Weedle"]       = {7286, 2389, 13, 50},
["Kakuna"]       = {7287, 2390, 14, 100},
["Beedrill"]     = {7288, 2391, 15, 100},
["Pidgey"]       = {7289, 2392, 16, 50},
["Pidgeotto"]    = {7290, 2393, 17, 100},
["Pidgeot"]      = {7291, 2394, 18, 300},
["Rattata"]      = {7292, 2395, 19, 50},
["Raticate"]     = {7293, 2396, 20, 100},
["Spearow"]      = {7294, 2397, 21, 50},
["Fearow"]       = {7295, 2398, 22, 200},
["Ekans"]        = {7296, 2399, 23, 50},
["Arbok"]        = {7297, 2400, 24, 100},
["Pikachu"]      = {7298, 2401, 25, 100},
["Raichu"]       = {7299, 2402, 26, 200},
["Sandshrew"]    = {7300, 2403, 27, 50},
["Sandslash"]    = {7301, 2404, 28, 200},
["Nidoran Female"]={7302, 2405, 29, 50},
["Nidorina"]     = {7303, 2406, 30, 100},
["Nidoqueen"]    = {7304, 2407, 31, 300},
["Nidoran Male"] = {7305, 2408, 32, 50},
["Nidorino"]     = {7306, 2409, 33, 100},
["Nidoking"]     = {7307, 2410, 34, 300},
["Clefairy"]     = {7308, 2411, 35, 100},
["Clefable"]     = {7309, 2412, 36, 200},
["Vulpix"]       = {7310, 2413, 37, 100},
["Ninetales"]    = {7311, 2414, 38, 200},
["Jigglypuff"]   = {7312, 2415, 39, 50},
["Wigglytuff"]   = {7313, 2416, 40, 200},
["Zubat"]        = {7314, 2417, 41, 50},
["Golbat"]       = {7315, 2418, 42, 100},
["Oddish"]       = {7316, 2419, 43, 50},
["Gloom"]        = {7317, 2420, 44, 100},
["Vileplume"]    = {7318, 2421, 45, 200},
["Paras"]        = {7319, 2422, 46, 50},
["Parasect"]     = {7320, 2423, 47, 100},
["Venonat"]      = {7321, 2424, 48, 100},
["Venomoth"]     = {7322, 2425, 49, 200},
["Diglett"]      = {7323, 2426, 50, 50},
["Dugtrio"]      = {7324, 2427, 51, 200},
["Meowth"]       = {7325, 2428, 52, 100},
["Persian"]      = {7326, 2429, 53, 200},
["Psyduck"]      = {7327, 2430, 54, 100},
["Golduck"]      = {7328, 2431, 55, 200},
["Mankey"]       = {7329, 2432, 56, 50},
["Primeape"]     = {7330, 2433, 57, 100},
["Growlithe"]    = {7331, 2434, 58, 100},
["Arcanine"]     = {7332, 2435, 59, 300},
["Poliwag"]      = {7333, 2436, 60, 50},
["Poliwhirl"]    = {7334, 2437, 61, 100},
["Poliwrath"]    = {7335, 2438, 62, 200},
["Abra"]         = {7336, 2439, 63, 100},
["Kadabra"]      = {7337, 2440, 64, 200},
["Alakazam"]     = {7338, 2441, 65, 300},
["Machop"]       = {7339, 2442, 66, 100},
["Machoke"]      = {7340, 2443, 67, 200},
["Machamp"]      = {7341, 2444, 68, 300},
["Bellsprout"]   = {7342, 2445, 69, 50},
["Weepinbell"]   = {7343, 2446, 70, 100},
["Victreebel"]   = {7344, 2447, 71, 200},
["Tentacool"]    = {7345, 2448, 72, 50},
["Tentacruel"]   = {7346, 2449, 72, 300},
["Geodude"]      = {7347, 2450, 74, 100},
["Graveler"]     = {7348, 2451, 75, 200},
["Golem"]        = {7349, 2452, 76, 300},
["Ponyta"]       = {7350, 2453, 77, 100},
["Rapidash"]     = {7351, 2454, 78, 200},
["Slowpoke"]     = {7352, 2455, 79, 50},
["Slowbro"]      = {7353, 2456, 80, 200},
["Magnemite"]    = {7354, 2457, 81, 100},
["Magneton"]     = {7355, 2458, 82, 200},
["Farfetchd"]    = {7356, 2459, 83, 200},
["Doduo"]        = {7357, 2460, 84, 50},
["Dodrio"]       = {7358, 2461, 85, 200},
["Seel"]         = {7359, 2462, 86, 100},
["Dewgong"]      = {7360, 2463, 87, 200},
["Grimer"]       = {7361, 2464, 88, 100},
["Muk"]          = {7362, 2465, 89, 200},
["Shellder"]     = {7363, 2466, 90, 50},
["Cloyster"]     = {7364, 2467, 91, 200},
["Gastly"]       = {7365, 2468, 92, 100},
["Haunter"]      = {7366, 2469, 93, 200},
["Gengar"]       = {7367, 2470, 94, 300},
["Onix"]         = {7368, 2471, 95, 200},
["Drowzee"]      = {7369, 2472, 96, 150},
["Hypno"]        = {7370, 2473, 97, 250},
["Krabby"]       = {7371, 2474, 98, 50},
["Kingler"]      = {7372, 2475, 99, 150},
["Voltorb"]      = {7373, 2476, 100, 100},
["Electrode"]    = {7374, 2477, 101, 200},
["Exeggcute"]    = {7375, 2478, 102, 100},
["Exeggutor"]    = {7376, 2479, 103, 200},
["Cubone"]       = {7377, 2480, 104, 100},
["Marowak"]      = {7378, 2481, 105, 200},
["Hitmonlee"]    = {7379, 2482, 106, 350},
["Hitmonchan"]   = {7380, 2483, 107, 350},
["Lickitung"]    = {7381, 2484, 108, 300},
["Koffing"]      = {7382, 2485, 109, 50},
["Weezing"]      = {7383, 2486, 110, 100},
["Rhyhorn"]      = {7384, 2487, 111, 100},
["Rhydon"]       = {7385, 2488, 112, 200},
["Chansey"]      = {7386, 2489, 113, 350},
["Tangela"]      = {7387, 2490, 114, 200},
["Kangaskhan"]   = {7388, 2491, 115, 300},
["Horsea"]       = {7389, 2492, 116, 50},
["Seadra"]       = {7390, 2493, 117, 150},
["Goldeen"]      = {7391, 2494, 118, 50},
["Seaking"]      = {7392, 2495, 119, 100},
["Staryu"]       = {7393, 2496, 120, 100},
["Starmie"]      = {7394, 2497, 121, 200},
["Mr Mime"]      = {7395, 2498, 122, 300},
["Scyther"]      = {7396, 2499, 123, 350},
["Jynx"]         = {7397, 2500, 124, 300},
["Electabuzz"]   = {7398, 2501, 125, 300},
["Magmar"]       = {7399, 2502, 126, 300},
["Pinsir"]       = {7400, 2503, 127, 250},
["Tauros"]       = {7401, 2504, 128, 200},
["Magikarp"]     = {7402, 2505, 129, 30},
["Gyarados"]     = {7403, 2506, 130, 300},
["Lapras"]       = {7404, 2507, 131, 300},
["Ditto"]        = {7405, 2508, 132, 350},
["Eevee"]        = {7406, 2509, 133, 300},
["Vaporeon"]     = {7407, 2510, 134, 350},
["Jolteon"]      = {7408, 2511, 135, 350},
["Flareon"]      = {7409, 2512, 136, 350},
["Porygon"]      = {7410, 2513, 137, 300},
["Omanyte"]      = {7411, 2514, 138, 350},
["Omastar"]      = {7412, 2515, 139, 350},
["Kabuto"]       = {7413, 2516, 140, 350},
["Kabutops"]     = {7414, 2517, 141, 350},
["Aerodactyl"]   = {7415, 2518, 142, 350},
["Snorlax"]      = {7416, 2519, 143, 300},
["Articuno"]     = {7417, 2520, 144, 1000},
["Zapdos"]       = {7418, 2521, 145, 1000},
["Moltres"]      = {7419, 2522, 146, 1000},
["Dratini"]      = {7420, 2523, 147, 100},
["Dragonair"]    = {7421, 2524, 148, 200},
["Dragonite"]    = {7422, 2525, 149, 300},
["Mewtwo"]       = {7423, 2526, 150, 2000},
["Mew"]          = {7424, 2527, 151, 2000},
}
function addPoke(cid, storage)

		setPlayerStorageValue(cid, storage, 1)
		
end

function onUse(cid, item, fromPosition, itemEx, toPosition)
		if not isCreature(itemEx.uid) then
		    	return doPlayerSendCancel(cid, "Invalid action.")
		end
		
		local showpokedex = ""
		local img = ""
		local pokeNome = ""
		if isSummon(itemEx.uid) then
				pokeOwner = getCreatureMaster(itemEx.uid)
				ownerItem = getPlayerSlotItem(pokeOwner, 8)
				pokeNome = getItemAttribute(ownerItem.uid, "poke"):match("This is (.-)'s pokeball.")
				
				local p = pokemons[pokeNome]
				if p then
						img = p[2]
						showpokedex = doShowTextDialog(cid, img, io.open('data/actions/scripts/descriptions/'.. p[3] ..'.txt'):read("*all"))
						if isMonster(itemEx.uid) then
								return getPlayerStorageValue(cid, p[1]) ~= 1 and doPlayerSendTextMessage(cid, 22, "Now you registered ".. pokeNome .." into pokedex!") and doPlayerSendTextMessage(cid, 22, "You gain "..p[4].." experience!") and doPlayerAddExperience(cid, p[4]) and showpokedex and addPoke(cid, p[1]) or getPlayerStorageValue(cid, p[1]) == 1 and showpokedex
						end
				end
				
		else

				pokeNome = getCreatureName(itemEx.uid)
				
				local p = pokemons[pokeNome]
				if p then
						img = p[2]
						showpokedex = doShowTextDialog(cid, img, io.open('data/actions/scripts/descriptions/'.. p[3] ..'.txt'):read("*all"))
						if isMonster(itemEx.uid) then
								return getPlayerStorageValue(cid, p[1]) ~= 1 and doPlayerSendTextMessage(cid, 22, "Now you registered ".. pokeNome .." into pokedex!") and doPlayerSendTextMessage(cid, 22, "You gain "..p[4].." experience!") and doPlayerAddExperience(cid, p[4]) and showpokedex and addPoke(cid, p[1]) or getPlayerStorageValue(cid, p[1]) == 1 and showpokedex
						end
				end
		
		end


		if getCreatureName(itemEx.uid) == getCreatureName(cid) then
		    local list = "Pokedex registration: \n"
		        local pokemonss = 0
		    for i = 7274,7424 do
		        if getPlayerStorageValue(cid, i) == 1 then
		            list = list.."\n[".. pokestorages[i][1] .."] - ".. pokestorages[i][2] ..""
		                        pokemonss = pokemonss + 1
		        elseif getPlayerStorageValue(cid, i) == -1 then
		            list = list.."\n[".. pokestorages[i][1] .."] - Uknown pokemon"
		        end
		    end
		        doPlayerSendTextMessage(cid, TALKTYPE_ORANGE_1, "You have ".. pokemonss .." unlocked pokemons.")
		    doShowTextDialog(cid, item.itemid, "".. list .."\n\nEnd of registration.")
		end
		
		return true
		
end
